{% extends 'outcomes/outcome_detail.html' %}
{% load static %}

{% block custom_css %}
<link rel="stylesheet" type="text/css" href="{% static 'outcomes/styles.css' %}">
{% endblock custom_css %}

{% block extra-content %}

{% if user.is_authenticated %}
  {% if form.errors %}
    {% for error in form.non_form_errors %}
    <div class="alert alert-danger">
      <strong>{{ error|escape }}</strong>
    </div>
    {% endfor %}
  {% endif %}
<form 
  id="outcome_media_form" 
  class="custom-validation mt-auto"
  method="post"
  enctype="multipart/form-data"
  novalidate>
  {% csrf_token %}

  {{ form.management_form }}

  {% for upload_form in form %}
  <div id="outcome-media-forms-row">
    <div id="outcome-media-forms">
      <div class="form-group col-12">
        <div class="media-upload spacer">
          <div class="custom-file col-11">
            {{ upload_form.media }}
            <div class="invalid-feedback">
              Select a file
            </div>
          </div>
          <div class="input-group row col-11 col-md-10 col-lg-9 col-xl-7">
            <button type="button" class="btn add-media-upload">+</button>
            {{ upload_form.outcome_type }}
            <div class="invalid-feedback">
              Select a file type
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  <div class="submit-row">
    <div class="mr-auto">
      <input type="Submit" class="btn btn-raised btn-primary" value="Submit">
    </div>
    {% block back_navigate %}
    <a class="btn" href="{% url 'outcomes:outcome-media-update' outcome.slug %}">Clear</a>
    {% endblock back_navigate %}
  </div>
</form>
{% endif %}
{% endblock extra-content %}

{% block custom_js %}
<script src="{% static 'js/outcomemedia-formset-management.js'%}" type='text/javascript'></script>
{% endblock custom_js %}
